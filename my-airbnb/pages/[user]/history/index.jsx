import Head from "next/head";
import Navbar from "../../../components/Navbar";
import axios from "axios";

export async function getServerSideProps() {
  const result = await axios.get(
    "https://virtserver.swaggerhub.com/HERIBUDIYANA/Air-Bnb/1.0.0/trips"
  );
  const data = result.data;
  return {
    props: {
      data: data,
    },
  };
}

export default function History({ data }) {
  return (
    <div className="min-h-screen bg-white text-black">
      <Head>
        <title>Hyrule Travel - Find A New Place</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/icon.png" />
      </Head>
      <main>
        <Navbar />
        <div className="px-48 pb-48 pt-20">
          <h1 className="text-6xl border-b-2 pb-5">Trip Log</h1>
          {data.data.map((data) => {
            return (
              <div
                key={data.id_homestay}
                className="flex flex-col w-full rounded-lg border-2 p-3 mt-5"
              >
                <div>
                  <p>{data.title}</p>
                </div>
                <div className="flex flex-row pt-3">
                  <p className="font-bold pr-2">
                    Checkin date:{" "}
                    <span className="font-normal">{data.checkin}</span>
                  </p>
                  <p className="font-bold pr-2">
                    Checkout date:{" "}
                    <span className="font-normal">{data.checkout}</span>
                  </p>
                </div>
                <div className="pt-2">
                  <p>
                    Total Price: <span>{data.total_price}</span>
                  </p>
                  <p>
                    Status: <span>{data.status}</span>
                  </p>
                </div>
              </div>
            );
          })}
        </div>
      </main>
    </div>
  );
}
